# Overview

## What is rust-wasmpack-loader?

**rust-wasmpack-loader** is a native WebAssembly (WASM) loader that allows you to seamlessly integrate Rust code into your JavaScript and TypeScript projects by just importing `.rs` files inside other code.

## How It Works

The loader automatically:

1. **Detects** `.rs` files in your project
2. **Finds** the corresponding `Cargo.toml` configuration
3. **Compiles** Rust code to WebAssembly using `wasm-pack`
4. **Generates** JavaScript bindings with `wasm-bindgen`
5. **Integrates** the compiled WASM module into your bundle

## Architecture

```mermaid
graph LR
    A["Rust Code (.rs)"] --> B[rust-wasmpack-loader]
    B --> C[wasm-pack]
    C --> D["WebAssembly (.wasm)"]
    C --> E["JS Bindings (.js)"]
    D --> F[Your Application]
    E --> F
```

## Key Benefits
- **Direct imports** - Use `.rs` files like any other import module
- **Hot reload support** during development
- **TypeScript integration** with generated type definitions
- **Webpack 5+** support with explicit targets (web, node)
- **Bun runtime** compatibility for modern JavaScript environments

## Use Cases

### Ideal For:
- **Mathematical computations** (cryptography, image processing, algorithms)
- **Huge data processing** (parsing, transformation, validation)
- **Game engines** and graphics programming
- **Performance-critical libraries**
- **Legacy C/C++ code migration** to the web

### Examples:
- Image filters and manipulation
- Cryptocurrency mining/validation *(please, don't do this at least inside browsers)*
- Scientific simulations
- Audio/video processing
- Machine learning inference
- Compression algorithms

## Supported Targets

| Target       | Webpack           | Bun |
|--------------|-------------------|-----|
| `web`        | âœ…                 | âŒ   |
| `node`       | âœ…                 | âœ…   |
| `node-async` | âœ…                 | âœ…   |
| `electron`   | âš ï¸ *(not tested)* | âŒ   |

## Comparison with Alternatives

### Legend:
- âœ… **Full support** - Feature works out of the box
- âš ï¸ **Partial support** - Feature works with additional configuration
- ğŸ¤š **manual setup** - Feature requires manual steps to enable
- âŒ **No support** - Feature is not available
- ğŸŸ¢ **Good** - Excellent experience
- ğŸŸ¡ **Medium** - Acceptable with some effort
- ğŸ”´ **Poor** - Significant challenges

| Feature                       | rust-wasmpack-loader | Manual wasm-pack | @wasm-tool/wasm-pack-plugin | vite-plugin-wasm | Rollup WASM | esbuild WASM | Raw WASM imports |
|-------------------------------|----------------------|------------------|-----------------------------|------------------|-------------|--------------|------------------|
| **Direct .rs imports**        | âœ…                    | âŒ                | âŒ                           | âŒ                | âŒ           | âŒ            | âŒ                |
| **Auto Cargo.toml detection** | âœ…                    | âŒ                | ğŸ¤š                          | âŒ                | âŒ           | âŒ            | âŒ                |
| **Hot reload support**        | âœ…                    | âŒ                | âœ…                           | âœ…                | âš ï¸          | âœ…            | âŒ                |
| **Bun runtime support**       | âœ…                    | ğŸ¤š               | âŒ                           | âŒ                | âŒ           | ğŸ¤š           | ğŸ¤š               |
| **Webpack integration**       | âœ…                    | âŒ                | âœ…                           | âŒ                | âŒ           | âŒ            | âš ï¸               |
| **Vite/Rollup integration**   | âŒ                    | âŒ                | âŒ                           | âœ…                | âœ…           | âŒ            | âš ï¸               |
| **esbuild integration**       | âŒ                    | âŒ                | âŒ                           | âŒ                | âŒ           | âœ…            | âš ï¸               |
| **TypeScript bindings**       | âœ…                    | âœ…                | âœ…                           | âœ…                | âœ…           | âœ…            | âŒ                |
| **Zero configuration**        | âœ…                    | âŒ                | âŒ                           | âŒ                | âŒ           | âŒ            | âŒ                |
| **Async WASM loading**        | âœ…                    | âœ…                | âœ…                           | âœ…                | âœ…           | âœ…            | âœ…                |
| **Bundle size optimization**  | âœ…                    | âš ï¸               | âš ï¸                          | âœ…                | âœ…           | âœ…            | âš ï¸               |
| **Node.js target support**    | âœ…                    | âœ…                | âœ…                           | âš ï¸               | âœ…           | âœ…            | âœ…                |
| **Web target support**        | âœ…                    | âœ…                | âœ…                           | âœ…                | âœ…           | âœ…            | âœ…                |
| **Learning curve**            | ğŸŸ¢ Easy              | ğŸ”´ Hard          | ğŸŸ¡ Medium                   | ğŸŸ¡ Medium        | ğŸŸ¡ Medium   | ğŸŸ¡ Medium    | ğŸ”´ Hard          |
| **Maintenance status**        | ğŸŸ¢ Active            | ğŸŸ¢ Active        | ğŸŸ¡ Limited                  | ğŸŸ¢ Active        | ğŸŸ¢ Active   | ğŸŸ¢ Active    | N/A              |

### Key Differentiators:

**rust-wasmpack-loader** stands out by:
- Being the only loader to support **direct `.rs` file imports** without build configuration
- Offering **native Bun runtime support** (unique in the ecosystem)
- Providing **automatic Cargo.toml discovery** up the directory tree
- Requiring **zero configuration** for basic usage
- Supporting both **Webpack and Bun** in a single package

**Alternative approaches:**
- **Manual wasm-pack**: Requires separate build steps and manual integration
- **@wasm-tool/wasm-pack-plugin**: More mature, Webpack-only, less automated and requires explicit configuration
- **vite-plugin-wasm**: Vite-specific, different ecosystem
- **Rollup/esbuild WASM**: Require pre-compiled WASM files
- **Raw WASM imports**: No build automation, manual TypeScript bindings